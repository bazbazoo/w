#!/usr/bin/env python

def get_logger():
  from logging import Formatter, StreamHandler, getLogger

  ch = StreamHandler()
  ch.setFormatter(Formatter('%(levelname)s %(message)s'))

  logger = getLogger('root')
  logger.addHandler(ch)

  return logger

def get_args():
  from argparse import ArgumentParser

  p = ArgumentParser()

  p.add_argument(
    'root',
    metavar='R',
    type=str,
    nargs='?',
    default='.')

  p.add_argument(
    '--ip', '-a',
    type=str,
    dest='ip',
    default='0.0.0.0')

  p.add_argument(
    '--port', '-p',
    type=int,
    dest='port',
    default=8000)

  return p.parse_args()

args = get_args()

from w import run
run(args.ip, args.port, args.root, get_logger())